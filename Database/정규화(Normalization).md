정규화란, 관계형 데이터 모델에([[RDBMS]])서 데이터의 중복성을 제거하려 이상현상([[anomaly]])를 방지하고, 데이터의 일관성과 정확성을 유지하기 위해 무손실 분해하는 과정을 말한다.
# 정규화의 목적
**중복 데이터 최소화**
정규화를 통해 데이터 중복을 최소화하고 저장 공간을 절약하고 데이터 일관성을 유지할 수 있다.

**데이터 일관성 유지**
정규화를 통해 데이터의 이상현상을 방지해 데이터 일관성을 유지할 수 있다.

**쿼리 최적화**
정규화된 데이터베이스 구조는 데이터를 효율적으로 저장하고 관리할 수 있도록 한다. 이를 통해 데이터베이스 쿼리의 성능을 향상시키고 데이터 접근 속도를 개선할 수 있다.

**유연성 향상**
정규화된 데이터베이스는 데이터 모델이 변경되어도 정규화된 구조를 유지하면서 쉽게 수정할 수 있다.

**데이터 무결성 보장**
정규화는 데이터의 무결성을 보장하며, 데이터베이스 내의 데이터 무결성 제약 조건을 준수하도록 한다.
### 정규화의 단점
>- 릴레이션의 분해로 인해 릴레이션 간의 `JOIN` 연산이 많아진다.
>	- `JOIN` 연산으로 인해 성능 저하가 나타나는 경우, [[반정규화(De-nomalization)]]를 적용할 수 있다.
>- 질의에 대한 응답 시간이 느려질 수 있다.
>	- 데이터의 중복 속성을 제거하고 결정자에 의해 동일한 의미의 일반 속성이 하나의 테이블로 집약되기 때문에, 한 테이블의 데이터 용량이 최소화되는 효과가 있다.
# 정규화 단계
##### 제1 정규화(1NF)
제1 정규화는 다음의 규칙을 만족해야 한다.
>1. 각 컬럼이 하나의 속성만을 가져야 한다. (원자값을 가져야 한다.)
>2. 하나의 컬럼은 같은 종류나 타입(type)의 값을 가져야 한다.
>3. 각 컬럼이 유일한(unique) 이름을 가져야 한다.
>4. 컬럼의 순서가 상관 없어야 한다.

제1 정규화가 필요한 테이블은 **다중 값을 포함하고 있는** 테이블이다.

| 주문 번호 | 고객 이름 | 주문 일자      | 주문 항목        |
| ----- | ----- | ---------- | ------------ |
| 1     | 홍길동   | 2024-02-27 | TV, 냉장고, 세탁기 |
| 2     | 김철수   | 2024-02-28 | 노트북, 스마트폰    |
| 3     | 이영희   | 2024-02-29 | 책, 연필, 종이    |
- 위 테이블에서, `주문항목` 컬럼은 여러 제품을 쉼표로 구분하여 나열하고 있다.
- 이는 다중값으로 간주되며, 이러한 상태에서는 제1 정규화를 적용해야 한다.
- 즉, 다중값을 가지는 컬럼이 원자값을 가지도록 **별도의 튜플로 분리**한다.
다음 제1 정규화가 적용된 후의 테이블이다.

| 주문 번호 | 고객 이름 | 주문 일자      | 주문 항목 |
| ----- | ----- | ---------- | ----- |
| 1     | 홍길동   | 2024-02-27 | TV    |
| 1     | 홍길동   | 2024-02-27 | 냉장고   |
| 1     | 홍길동   | 2024-02-27 | 세탁기   |
| 2     | 김철수   | 2024-02-28 | 노트북   |
| 2     | 김철수   | 2024-02-28 | 스마트폰  |
| 3     | 이영희   | 2024-02-29 | 책     |
| 3     | 이영희   | 2024-02-29 | 연필    |
| 3     | 이영희   | 2024-02-29 | 종이    |

##### 제2 정규화(2NF)
제2 정규화는 다음의 규칙을 만족해야 한다.
>1. 제1 정규화를 만족해야 한다.
>2. 모든 컬럼이 부분적 종속이 없어야 한다. (모든 컬럼이 완전 함수 종속을 만족해야 한다.)

제2 정규화가 필요한 상태의 테이블은 기본 키에 의존하지 않는 **부분 함수 종속성이 존재하는 테이블**이다.

| 주문 번호 | 제품 번호 | 제품 이름 | 제품 가격 |
| ----- | ----- | ----- | ----- |
| 1     | 101   | TV    | 1000  |
| 1     | 102   | 냉장고   | 1500  |
| 2     | 201   | 노트북   | 800   |
| 2     | 202   | 스마트폰  | 600   |
| 3     | 301   | 책     | 20    |
| 3     | 302   | 연필    | 5     |
| 3     | 303   | 종이    | 10    |
- 위 테이블에서 `{주문 번호}`는 기본키이지만, `{제품 번호}`, `{제품 이름}`은 `{주문 번호}`에만 의존하는 함수 종속성이 존재한다. 
- 따라서 `{주문 번호}`에 대해 부분적으로 종속되어 있는 `{제품 이름}`은 별도의 테이블로 분리하여 제2 정규화를 진행해야 한다.

**주문 상세 테이블(Order_Details)**

| 주문 번호 | 제품 번호 | 제품 가격 |
| ----- | ----- | ----- |
| 1     | 101   | 1000  |
| 1     | 102   | 1500  |
| 2     | 201   | 800   |
| 2     | 202   | 600   |
| 3     | 301   | 20    |
| 3     | 302   | 5     |
| 3     | 303   | 10    |
**제품 정보 테이블(Product_Info)**

| 제품 번호 | 제품 이름 |
| ----- | ----- |
| 101   | TV    |
| 102   | 냉장고   |
| 201   | 노트북   |
| 202   | 스마트폰  |
| 301   | 책     |
| 302   | 연필    |
| 303   | 종이    |
##### 제3 정규화(3NF)
제3 정규화는 다음의 규칙을 만족해야 한다.
>1. 제2 정규화를 만족해야 한다.
>2. 기본키를 제외한 속성들 간의 이행 종속성이 없어야 한다.


---
### 참고 자료
[[DB] 정규화(Normalization)란? 정규화 예시, 1NF, 2NF, 3NF, BCNF (tistory.com)](https://code-lab1.tistory.com/48)
[Normalization in DBMS: 1NF, 2NF, 3NF, BCNF & 4NF with Examples - TAE (tutorialandexample.com)](https://www.tutorialandexample.com/normalization-in-dbms)
